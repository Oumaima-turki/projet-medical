<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contrôle de la Répétabilité du Kerma</title>
    <!-- Lien vers le fichier CSS -->
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <script>
        function calculerAcceptabilite() {
            // Récupérer les valeurs de kerma mesurées
            let valeursKerma = [];
            for (let i = 1; i <= 5; i++) {
                valeursKerma.push(parseFloat(document.getElementById("kerma" + i).value));
            }

            // Calculer la moyenne des valeurs de kerma
            let somme = valeursKerma.reduce((a, b) => a + b, 0);
            let moyenneKerma = somme / valeursKerma.length;

            // Calculer le critère d'acceptabilité pour chaque valeur
            let tolerence = 10; // Tolérance fixée à 10 %
            let resultats = valeursKerma.map(valeur => {
                let erreur = Math.abs((valeur - moyenneKerma) / moyenneKerma) * 100;
                return {
                    valeur: valeur.toFixed(2),
                    erreur: erreur.toFixed(2),
                    acceptable: erreur <= tolerence ? "Acceptable" : "Rejeté"
                };
            });

            // Afficher les résultats dans le tableau
            let tableau = document.getElementById("resultatsTableau");
            tableau.innerHTML = `
                <tr>
                    <th>Exposition</th>
                    <th>Kerma Mesurée (mGy)</th>
                    <th>Moyenne Kerma (mGy)</th>
                    <th>Erreur (%)</th>
                    <th>Résultat</th>
                </tr>
            `; // Réinitialisation du tableau

            resultats.forEach((resultat, index) => {
                let row = tableau.insertRow();
                row.insertCell(0).textContent = index + 1;
                row.insertCell(1).textContent = resultat.valeur;
                row.insertCell(2).textContent = moyenneKerma.toFixed(2);
                row.insertCell(3).textContent = resultat.erreur;
                row.insertCell(4).textContent = resultat.acceptable;
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Test 3: Contrôle de la Répétabilité du Kerma</h1>

        <div class="content">
            <!-- Formulaire pour fixer les paramètres -->
            <h2>Paramètres fixes :</h2>
            <form>
                <label for="kv">kV :</label>
                <input type="number" id="kv" placeholder="Valeur en kV" required>
                <label for="mas">mAs :</label>
                <input type="number" id="mas" placeholder="Valeur en mAs" required>
                <label for="distance">Distance (cm) :</label>
                <input type="number" id="distance" placeholder="Distance entre le tube et le détecteur" required>
            </form>

            <!-- Formulaire pour entrer les valeurs mesurées -->
            <h2>Entrer les kermas mesurées pour les 5 expositions :</h2>
            <form id="kermaForm">
                <table>
                    <tr>
                        <th>Exposition</th>
                        <th>Kerma Mesurée (mGy)</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td><input type="number" id="kerma1" required></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><input type="number" id="kerma2" required></td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><input type="number" id="kerma3" required></td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><input type="number" id="kerma4" required></td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td><input type="number" id="kerma5" required></td>
                    </tr>
                </table>
                <button type="button" onclick="calculerAcceptabilite()">Calculer l'acceptabilité</button>
            </form>

            <!-- Tableau des résultats -->
            <h3>Résultats des Expositions</h3>
            <table id="resultatsTableau" border="1">
                <tr>
                    <th>Exposition</th>
                    <th>Kerma Mesurée (mGy)</th>
                    <th>Moyenne Kerma (mGy)</th>
                    <th>Erreur (%)</th>
                    <th>Résultat</th>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>
